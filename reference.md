# API (0x40)

## 1文字表示

### 引数

- EDX : 1
- AL : 文字コード

## 1行表示(null文字まで)

### 引数

- EDX : 2
- EBX : 文字列が置かれている番地


## 1行表示(サイズ指定

### 引数

- EDX : 3
- EBX : 文字列が置かれている番地
- ECX : サイズ

## アプリ終了

### 引数

- EDX : 4

## ウィンドウ表示

### 引数

- EDX : 5
- EBX : ウィンドウのバッファ
- ESI : Width
- EDI : Height
- EAX : 透明色
- ECX : ウィンドウの名前

### 返り値

- EAX : ウィンドウID

## ウィンドウへの文字表示

### 引数

- EDX : 6
- EBX : ウィンドウID
- ESI : x座標
- EDI : y座標
- EAX : 色番号
- ECX : 文字列の長さ
- EBP : 文字列

## ウィンドウに四角形を描画

### 引数

- EDX : 7
- EBX : ウィンドウID
- EAX : x0
- ECX : y0
- ESI : x1
- EDI : y1
- EBP : 色番号

## memman_init

### 引数

- EDX : 8
- EBX : memmanのアドレス
- EAX : memmanに管理させる領域の先頭アドレス
- ECX : memmanに管理させる領域のサイズ

## malloc

### 引数

- EDX : 9
- EBX : memmanがあるアドレス
- ECX : 要求するバイト数

### 返り値

- EAX : 確保した先頭のアドレス

## mfree

### 引数

- EDX : 10
- EBX : memmanのアドレス
- EAX : 解放したい領域の先頭アドレス
- ECX : 解放するサイズ

## ウィンドウに点を描画する

### 引数

- EDX : 11
- EBX : ウィンドウバッファの先頭アドレス
- ESI : X座標
- EDI : Y座標
- EAX : 色

## ウィンドウリフレッシュ

### 引数

- EDX : 12
- EBX : ウインドウバッファの先頭アドレス
- EAX : x0
- ECX : y0
- ESI : x1
- EDI : y1

## ウィンドウに線を描画

### 引数

- EDX : 13
- EBX : ウィンドウバッファの先頭アドレス
- EAX : x0
- ECX : y0
- ESI : x1
- EDI : y1
- EBP : 色

## ウィンドウを閉じる

### 引数

- EDX : 14
- EBX : ウィンドウバッファの先頭アドレス

## キー入力を拾う

### 引数

- EDX : 15
- EAX : 0 = スリープしない, 0以外 = キー入力がされるまでスリープ

### 返り値

- EAX : キー情報

## タイマ取得(alloc)

### 引数

- EDX : 16

### 返り値

- EAX : タイマのアドレス

## タイマ設定(init)

### 引数

- EDX : 17
- EBX : タイマのアドレス
- EAX : 設定するデータ

## タイマ時間設定

### 引数

- EDX : 18
- EBX : タイマのアドレス
- EAX : 設定する時間

## タイマ解放

### 引数

- EDX : 19
- EBX : タイマのアドレス

## BEEP音再生

### 引数

- EDX : 20
- EAX : 周波数(mHz), 0を設定すると音を消す

## ファイルオープン

### 引数

- EDX : 21
- EBX : ファイル名

### 返り値

- EAX : ファイルハンドル(読み込み失敗時には0)

## ファイルクローズ

### 引数

- EDX : 22
- EAX : ファイルハンドル

## ファイルシーク

### 引数

- EDX : 23
- EAX : ファイルハンドル
- ECX : シークモード
    - 0 => ファイルの先頭を原点にとする
    - 1 => 現在読み込み中の場所を原点とする
    - 2 => ファイルの終端を原点とする
- EBX : シーク量

## ファイルサイズ取得

### 引数

- EDX : 24
- EAX : ファイルハンドル
- ECX : ファイルサイズ取得モード
    - 0 : ファイルサイズ
    - 1 : 現在読み込み位置は先頭から何バイトの位置か
    - 2 : 現在読み込み位置からファイルの終端は何バイトあるか

### 返り値

- EAX : ファイルサイズ

## ファイル読み込み

### 引数

- EDX : 25
- EAX : ファイルハンドル
- EBX : バッファの番地
- ECX : 最大読み込みバイト数

### 返り値

- EAX : 今回読み込めたバイト数

## コマンドライン取得

### 引数

- EDX : 26
- EBX : コマンドラインを格納するバッファのアドレス
- ECX : 何バイトまで格納するか

### 返り値

- EAX : 何バイト格納されたか

## 言語モード取得

### 引数

- EDX : 27

### 返り値

- EAX : 言語モード
    - 0 : ASCII English
    - 1 : Shift-JIS
    - 2 : EUC-JP
